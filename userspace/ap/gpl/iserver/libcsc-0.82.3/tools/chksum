#!/bin/sh


# *****************************************************************************
#
# *****************************************************************************

stat=1


# *****************************************************************************
#
# *****************************************************************************

if [ $# -gt 0 ]; then
	rm -f $1
	sum */*.[chly] > $1
else
	if [ ! -f CHECKSUMS ]; then
		echo "There is no CHECKSUMS file; you hoser."
	else
		rm -f .checksums
		sum */*.[chly] > .checksums
		diff=`diff CHECKSUMS .checksums`
		if [ -z "$diff" ]; then
			echo "OK"
			rm -f .checksums
			stat=0
		else
			echo "Ouch"
			diff CHECKSUMS .checksums
		fi
	fi
fi


# *****************************************************************************
#
# *****************************************************************************

exit $stat
